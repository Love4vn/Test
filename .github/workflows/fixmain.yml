name: Update

on:
  watch:
    types: [started]
  schedule:
    - cron: '*/10 * * * *'
  workflow_dispatch:

# Add permissions
permissions:
  contents: write
env:
  TZ: Asia/Ho_Chi_Minh

jobs:
  Update:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: GetTime
      run: echo "DATE=$(date +'%Y-%m-%d %H:%M:%S GMT+7')" >> $GITHUB_ENV

    - name: Update
      run: |
        # VTV Source
        rm -f VTV.m3u && 
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/thevinhnbvn35/iptvlink/main/hovantam.m3u -O 0Movie.m3u || true
          sed -i '/#EXTM3U/d;/#list/d;/#EXTVLCOPT/d;/#http/d' 0Movie.m3u || true
          sed -i -n '/,AXN/,+1p' 0Movie.m3u || true
          sed -i 's/,AXN/ tvg-id="axnhd" group-title="Movie",AXN/g' 0Movie.m3u || true
        
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/kupjta/iptv/main/tv360.m3u -O 3VTV.m3u || true
        sed -i -n '/"In The Box"/,+1p' 3VTV.m3u || true
        sed -i '1i #EXTINF:-1 group-title="üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£",----------‚ö°üçÅ‚ö°-Entertainment from WINTV Sources-‚ö°üçÅ‚ö°------------' 3VTV.m3u || true
        
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/kupjta/iptv/main/tv360.m3u -O 4VTV.m3u || true
        sed -i '/#EXTVLCOPT/d;/#http/d' 4VTV.m3u || true
        sed -i -n '/"VTVcab"/,+1p' 4VTV.m3u || true
        
        cat 0Movie.m3u 3VTV.m3u 4VTV.m3u >> VTV.m3u || true
        rm -f 0VTV.m3u 1VTV.m3u 2VTV.m3u 3VTV.m3u 5VTV.m3u 4VTV.m3u 0Movie.m3u 1Movie.m3u || true
        sed -i 's/"Thit yu"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"üå∫| VTV"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"VTV"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"‚ôªÔ∏è| Gi·∫£i tr√≠ & News"/"Du l·ªãch-Kh√°m ph√°"/g;s/"üé¨| Phim truy·ªán"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"In The Box"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"Euro 2024"/"üî•üî•‚öΩ| Euro 2024"/g;s/, VTV1/,üå∫| VTV1/g;s/, VTV2/,üå∫| VTV2/g;s/, VTV3/,üå∫| VTV3/g;s/, VTV4/,üå∫| VTV4/g;s/, VTV5/,üå∫| VTV5/g;s/, VTV6/,üå∫| VTV6/g;s/, VTV7/,üå∫| VTV7/g;s/, VTV8/,üå∫| VTV8/g;s/, VTV9/,üå∫| VTV9/g;s/, VTV C·∫ßn Th∆°/,üå∫| VTV C·∫ßn Th∆°/g;s/"VTVcab HD"/"ü•è|K√™nh VTVCab"/g;s/"VTC HD"/"Nh√≥m K√™nh VTC"/g' VTV.m3u || true
        sed -i '/^\s*$/d' VTV.m3u || true
        
        # VCTV Source
        rm -f VCTV.m3u && touch VCTV.m3u
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/iptivi/apptv1/main/apptv1.m3u -O VCTV2.m3u || true
        sed -i -n '/Sport/,+1p' VCTV2.m3u || true
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/iptivi/apptv1/main/apptv1.m3u -O VCTV3.m3u || true
        sed -i -n '/SCTV/,+1p' VCTV3.m3u || true
        cat VCTV2.m3u >> VCTV.m3u || true
        cat VCTV3.m3u >> VCTV.m3u || true
        rm -f VCTV1.m3u VCTV2.m3u VCTV3.m3u || true
        sed -i '1i #EXTM3U' VCTV.m3u || true
        sed -i '/^\s*$/d' VCTV.m3u || true

        # hubsport Source
        rm -f S_check.m3u && wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/Love4vn/love4vn/main/S_check.m3u -O S_check.m3u || true
        sed -i '/^\s*$/d' S_check.m3u || true

        # Out_Iptv_CXT Source
        rm -f Out_Iptv_CXT.m3u && wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/Love4vn/love4vn/main/VTV_sort.m3u -O Out_Iptv_CXT.m3u || true
        sed -i '1i #EXTINF:-1 tvg-id="" tvg-name="***VTV Listings***" tvg-logo="https://github.com/Love4vn/Wall/blob/92e4f876d382d2945ebf0ee81e09a43aecffe52c/VTV_logo.png" group-title="üáªüá≥üì∫| K√™nh VTV üì¢",***VTV Listings***' Out_Iptv_CXT.m3u || true
        
        # Sports Source
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/a1xmedia/m3u/refs/heads/main/a1x.m3u -O tkty22.m3u || true
        sed -i 's/"ü¶ÅÊ¨ßÊ¥≤‰∫îÂ§ßËÅîËµõü¶Å"/"USUK SPORT"/g;s/"üêâÊµ∑Â§ñ‰ΩìËÇ≤"/"USUK SPORT"/g;s/"üêâ4K-8KÈ¢ëÈÅì"/"4Ô∏è‚É£üá∞ üá∫ üá≠ üá©"/g;s/"Sports"/"4Ô∏è‚É£üá∞ üá∫ üá≠ üá©"/g;s/"Events"/"4Ô∏è‚É£üá∞ üá∫ üá≠ üá©"/g' tkty22.m3u || true
        
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/Love4vn/love4vn/refs/heads/main/output.m3u -O Sport1.m3u || true

        # Integrate sources
        rm -f IPTV.m3u && touch IPTV.m3u
        cat Out_Iptv_CXT.m3u VTV.m3u >> IPTV.m3u || true
        cat S_check.m3u >> IPTV.m3u || true
        cat Sport1.m3u >> IPTV.m3u || true
        cat tkty22.m3u >> IPTV.m3u || true
        sed -i '/#EXTM3U/d' IPTV.m3u || true
        sed -i '1i #EXTM3U' IPTV.m3u || true
        sed -i 's/"K√äNH BOX"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"KNH K"/"K Channels"/g;s/"Minh c Gii Tr"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"KNH BOX"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"In The Box"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"TH NGHIM"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"FPT Play"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"Truyn Hnh"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"Quc T HD"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"K"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"Quc T"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú"/g;s/"Quc t"/"üîçüîí·¥π·µí·µõ‚Å±·µâÀ¢üì£üé¨üòú" /g;s/"üé¨üòú Phim üîçüì£"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"Phim"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"K√äNH THI·∫æT Y·∫æU"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"Thit yu"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"FPT Play"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"VTV"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"VTV 50fsp"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"Kenh VTV"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"‚ù§| VTV"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/"üáªüá≥üì∫| Nh√≥m K√™nh VTV üì¢"/"üáªüá≥üì∫| K√™nh VTV üì¢"/g;s/VTVCanTho/VTV C·∫ßn Th∆°/g;s/VTV5 Ty Nam B/VTV5 T√¢y Nam B·ªô/g;s/VTV5 Ty Nguyn/VTV5 T√¢y Nguy√™n/g;s/‚ù§Ô∏è| VTV6 ¬π‚Å∞‚Å∏‚Å∞/‚ù§Ô∏è| VTV6 C·∫ßn Th∆° ¬π‚Å∞‚Å∏‚Å∞/g;s/"Khm ph"/"Du l·ªãch-Kh√°m ph√°"/g;s/"Lifestyle"/"Du l·ªãch-Kh√°m ph√°"/g;s/"Du lchKhm ph"/"Du l·ªãch-Kh√°m ph√°"/g;s/"Animals Nature History"/"Du l·ªãch-Kh√°m ph√°"/g;s/"247"/"Du l·ªãch-Kh√°m ph√°"/g;s/"Movie"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"Movies"/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/g;s/"Relax"/"üòú‚ú®| Relax üòã"/g;s/"Comedy"/"üòú‚ú®| Relax üòã"/g;s/"Kids"/"Nh√≥m K√™nh Thi·∫øu Nhi "/g;s/"Selection Sport"/"üéØüîî|Selection Sport|üîîüéØ"/g;s/"Trc tip Euro 2024"/"üî•üî•‚öΩ| Euro 2024"/g;s/"Livestream"/"‚öΩü•éLivestreamüèÜüèÖ"/g;s/Âí™Âíï Êé®Ëçê/Migu Recommend/g;s/"‰∏ñÁïåÂ•≥ÊéíËÅîËµõ"/"üéäForeign Sportsüéä"/g;s/"Êµ™Áê¥ÂõΩÂÆ∂ÊùØ"/"üéäForeign Sportsüéä"/g;s/"NBA"/"üéäForeign Sportsüéä"/g;s/"ü•ÖÂ§ñÊ¨ßÊ¥≤ÊùØü•Ö"/"ü•Ö‚öΩÔ∏èEuropean Cup‚öΩÔ∏èü•Ö"/g;s/‡∏ä‡πà‡∏≠‡∏á/Channel/g' IPTV.m3u
        sed -i '/"Myanmar Tv"/{N; /"Myanmar Tv"/d;};/TH H NI 1 HD/{N; /TH H NI 1 HD/d;};/HYTV HD TH BO HNG YN/{N; /HYTV HD TH BO HNG YN/d;};/ANTV TH AN NINH HD/{N; /ANTV TH AN NINH HD/d;};/HueTV TH THNH PH HU HD/{N; /HueTV TH THNH PH HU HD/d;};/TH H NI 1 HD/{N; /TH H NI 1 HD/d;};/TH H NI 2 4K/{N; /TH H NI 2 4K/d;}' IPTV.m3u
        sed -i '/Â§ÆËßÜÈ¢ëÈÅì/{N; /Â§ÆËßÜÈ¢ëÈÅì/d;};/Âç´ËßÜÈ¢ëÈÅì/{N; /Âç´ËßÜÈ¢ëÈÅì/d;};/ÊπñÂåóÈ¢ëÈÅì/{N; /ÊπñÂåóÈ¢ëÈÅì/d;};/ÂÖ∂‰ªñÈ¢ëÈÅì/{N; /ÂÖ∂‰ªñÈ¢ëÈÅì/d;};/Ê≤≥ÂçóÈ¢ëÈÅì/{N; /Ê≤≥ÂçóÈ¢ëÈÅì/d;};/Âåó‰∫¨È¢ëÈÅì/{N; /Âåó‰∫¨È¢ëÈÅì/d;};/Ê∏ØÊæ≥È¢ëÈÅì/{N; /Ê∏ØÊæ≥È¢ëÈÅì/d;};/ÊπñÂçóÈ¢ëÈÅì/{N; /ÊπñÂçóÈ¢ëÈÅì/d;};/Âè∞ÊπæÈ¢ëÈÅì/{N; /Âè∞ÊπæÈ¢ëÈÅì/d;};/‰∏äÊµ∑È¢ëÈÅì/{N; /‰∏äÊµ∑È¢ëÈÅì/d;};/üêâÂõΩÂÜÖ‰ΩìËÇ≤üêâ/{N; /üêâÂõΩÂÜÖ‰ΩìËÇ≤üêâ/d;};/üé∞Â§ÆËßÜÂç´ËßÜüé∞/{N; /üé∞Â§ÆËßÜÂç´ËßÜüé∞/d;};/Âí™Âíï‰ΩìËÇ≤/{N; /Âí™Âíï‰ΩìËÇ≤/d;};/"‰∏ñÈ¢Ñ‰∫ö ‰∏≠ÂõΩvsÈü©ÂõΩ"/{N; /"‰∏ñÈ¢Ñ‰∫ö ‰∏≠ÂõΩvsÈü©ÂõΩ"/d;}' IPTV.m3u
        sed -i 's/"ÂõΩÂ§ñ‰ΩìËÇ≤"/"üéäForeign Sportsüéä"/g;s/"üé∞Â§ÆËßÜÂç´ËßÜüé∞"/"üèµüáπüáºüá≠üá∞CN_HK_TW Sportsüá≠üá∞üáπüáºüèµ"/g;s/"üèµÊ∏ØËãî‰ΩìËÇ≤üèµ"/"üèµüáπüáºüá≠üá∞CN_HK_TW Sportsüá≠üá∞üáπüáºüèµ"/g;s/Âπø‰∏ú/Guangdong /g;s/Âí™Âíï 4K Ê¨ßÊ¥≤ÊùØ/Migu 4K European Cup/g;s/Á≤§ËØ≠Commentary/English Commentary/g;s/Âí™Âíï HD Ê¨ßÊ¥≤ÊùØ/Migu HD European Cup/g;s/„ÄåÈúÄÈ≠îÊ≥ï„Äç/Requires magic/g' IPTV.m3u
        sed -i 's/"‚õπüèªÊ¨ßÂÜ†ËÅîËµõ‚õπüèª"/"üí°üèÜUEFA Champions LeagueüèÜüí°"/g;s/"üèàÊ≥ïÁî≤ËÅîËµõüèà"/"üóºüêìüá´üá∑France Footballüá´üá∑üêìüóº"/g;s/"üèâÂæ∑Áî≤ËÅîËµõüèâ"/"‚öΩÔ∏èüç∫üá©üá™German Bundesligaüá©üá™üç∫‚öΩÔ∏è"/g;s/"üèêË•øÁî≤ËÅîËµõüèê"/"‚öΩÔ∏èüá™üá∏La Ligaüá™üá∏‚öΩÔ∏è"/g;s/"ü•éÊÑèÁî≤ËÅîËµõü•é"/"‚öΩÔ∏èüçïüáÆüáπSerie AüáÆüáπüçï‚öΩÔ∏è"/g;s/"üéæÁΩëÁêÉËµõ‰∫ãüéæ"/"üéæü•éTennis Eventsü•éüéæ"/g;s/"‚õ≥Ô∏èÈ´òÂ∞îÂ§´Ëµõ‰∫ã‚õ≥Ô∏è"/"‚õ≥Ô∏èGolf Tournament‚õ≥Ô∏è"/g;s/"ü•ÖÂ§ñÊ¨ßÊ¥≤ÊùØü•Ö"/"ü•Ö‚öΩÔ∏èEuropean Cup‚öΩÔ∏èü•Ö"/g;s/"ü•ÖÂ§ñÊ¨ßÊ¥≤ÊùØü•Ö"/"ü•Ö‚öΩÔ∏èEuropean Cup‚öΩÔ∏èü•Ö"/g;s/"ü•ÖÊ¨ßÊ¥≤ÊùØËµõ‰∫ã‚ë†ü•Ö"/"ü•Ö‚öΩÔ∏èEuro 2024 ‚ë†‚öΩÔ∏èü•Ö"/g;s/"ü•ÖÊ¨ßÊ¥≤ÊùØËµõ‰∫ã‚ë°ü•Ö"/"ü•Ö‚öΩÔ∏èEuro 2024 ‚ë°‚öΩÔ∏èü•Ö"/g;s/"üèéF1Ëµõ‰∫ãüèé"/"üèéüèÅüö¶F1 Eventüö¶üèÅüèé"/g;s/"[^"]*4K[^"]*"/"4Ô∏è‚É£üá∞ üá∫ üá≠ üá©"/g;s/"üí∞PPV‰ªòË¥πËµõ‰∫ãüí∞"/"üí∞üí≤PPV Pay-Per-View Eventüí≤üí∞"/g;s/"üèÖNBAËµõ‰∫ãüèÖ"/"üèÖüèÄNBA EventsüèÄüèÖ"/g;s/"‚öΩÔ∏èËã±Ë∂ÖËÅîËµõ‚öΩÔ∏è"/"‚öΩÔ∏èü¶Åüá¨üáßPremier Leagueüá¨üáßü¶Å‚öΩÔ∏è"/g;s/"ü™ÇÂ§©Á©∫‰ΩìËÇ≤‚ë†ü™Ç"/"ü™ÇSky Sports ‚ë†ü™Ç"/g;s/"ü™ÇÂ§©Á©∫‰ΩìËÇ≤‚ë°ü™Ç"/"ü™ÇSky Sports ‚ë°ü™Ç"/g;s/"ü™ÇÂ§©Á©∫‰ΩìËÇ≤‚ë¢ü™Ç"/"ü™ÇSky Sports ‚ë¢ü™Ç"/g;s/"ü™ÇÂ§©Á©∫‰ΩìËÇ≤‚ë£ü™Ç"/"ü™ÇSky Sports ‚ë£ü™Ç"/g;s/"üõ°ELEVEN‰ΩìËÇ≤üõ°"/"üõ°ELEVEN SPORTüõ°"/g;s/"üõ°ELEVEN‰ΩìËÇ≤üõ°"/"üõ°ELEVEN SPORTüõ°"/g;s/"üî∞beIN‰ΩìËÇ≤ ‚ë†üî∞"/"üî∞beIN Sports ‚ë†üî∞"/g;s/"üî∞beIN‰ΩìËÇ≤ ‚ë°üî∞"/"üî∞beIN Sports ‚ë°üî∞"/g;s/"ü¶âTNT‰ΩìËÇ≤ü¶â"/"ü¶âTNT Sportsü¶â"/g;s/"üêçDAZN‰ΩìËÇ≤üêç"/"üêçDAZN Sportsüêç"/g;s/"ü¶ÖESPN‰ΩìËÇ≤ü¶Ö"/"ü¶ÖESPN Sportsü¶Ö"/g;s/"‚õÑÔ∏èFOX‰ΩìËÇ≤‚õÑÔ∏è"/"‚õÑÔ∏èü¶äFOX Sportsü¶ä‚õÑÔ∏è"/g;s/"‚òÄÔ∏èÂÖ∂‰ªñ‰ΩìËÇ≤‚òÄÔ∏è"/"‚òÄÔ∏èOther Sports‚òÄÔ∏è"/g;s/"üá∫üá∏ÁæéÂõΩ‰ΩìËÇ≤üá∫üá∏"/"üá∫üá∏üóΩUSA SportsüóΩüá∫üá∏"/g;s/"üá¨üáßËã±ÂõΩ‰ΩìËÇ≤üá¨üáß"/"üá¨üáßüíÇUK SportsüíÇüá¨üáß"/g;s/"üá´üá∑Ê≥ïÂõΩ‰ΩìËÇ≤üá´üá∑"/"üá´üá∑ü•ñüóºFrance Sportsüóºü•ñüá´üá∑"/g;s/‰ΩìËÇ≤Áõ¥Êí≠/Sports Live/g;s/ÂçöÊñØÈ´òÁêÉ/Boss Golf /g;s/Âè∞//g;s/ÂçöÊñØÁΩëÁêÉ/Boss Tennis/g;s/ÂçöÊñØ‰ΩìËÇ≤/Boss Sport /g;s/ÂçöÊñØ‰ΩìËÇ≤/Boss Sport /g;s/Áà±Â∞îËææ‰ΩìËÇ≤/Alda Sport /g;s/Á∫¨Êù•‰ΩìËÇ≤/Video Sport/g;s/ÊúâÊØîËµõÊó∂Êâç‰ºöÊîæÁõ¥Êí≠ÁîªÈù¢/Live broadcast will only be shown when there is a game/g;s/ËØ∑ÁïôÊÑèËµõ‰∫ãÁõ¥Êí≠Êó∂Èó¥ËßÇÁúã/Please pay attention to the live broadcast time of the event/g;s/Now ‰ΩìËÇ≤ Ëã±Ë∂Ö/Now Sports Premier League /g;s/NOW ‰ΩìËÇ≤ Ëã±Ë∂Ö/NOW Sports Premier League /g;s/Â§©Á©∫‰ΩìËÇ≤ Ëã±Ë∂Ö/Sky Sport Premier League/g;s/Â§©Á©∫‰ΩìËÇ≤ Êñ∞Èóª/Sky Sports News/g;s/Â§©Á©∫‰ΩìËÇ≤ ÁªºÂêà/Sky Sports Comprehensive/g;s/Â§©Á©∫‰ΩìËÇ≤ Ë∂≥ÁêÉ/Sky Sports Football/g;s/Â§©Á©∫‰ΩìËÇ≤ ÊùøÁêÉ/Sky Sports Cricket/g;s/Â§©Á©∫‰ΩìËÇ≤ È´òÂ∞îÂ§´/Sky Sports Golf/g;s/Â§©Á©∫‰ΩìËÇ≤ Á´ûÊäÄÂú∫/Sky Sports Arena/g;s/Â§©Á©∫‰ΩìËÇ≤ Ê©ÑÊ¶ÑÁêÉ/Sky Sports Rugby/g;s/Â§©Á©∫‰ΩìËÇ≤ USA/Sky Sports USA/g;s/Â§©Á©∫‰ΩìËÇ≤ Ëµõ‰∫ã/Sky Sports Events/g;s/Â§©Á©∫‰ΩìËÇ≤ ÁΩëÁêÉ/Sky Sports Tennis/g;s/Â§©Á©∫‰ΩìËÇ≤ F1/Sky Sports F1/g;s/Â§©Á©∫‰ΩìËÇ≤ ËµõËΩ¶/Sky Sports Racing/g;s/Â§©Á©∫‰ΩìËÇ≤ ÈõÑÁãÆ/Sky Sports Lions/g;s/Â§©Á©∫‰ΩìËÇ≤ ‰ªòË¥π/Sky Sports Paid/g;s/Â§©Á©∫‰ΩìËÇ≤ Âä®‰Ωú/Sky Sports Action/g;s/Â§©Á©∫‰ΩìËÇ≤ NBA/Sky Sports NBA/g;s/Â§©Á©∫‰ΩìËÇ≤ Ê†ºÊñó/Sky Sports Fighting/g;s/Â§©Á©∫‰ΩìËÇ≤ Âæ∑Áî≤/Sky Sports Bundesliga/g;s/Â§©Á©∫‰ΩìËÇ≤ Êæ≥Ê¥≤/Sky Sports Australia/g;s/Â§©Á©∫‰ΩìËÇ≤ ‰∏ªËµõ‰∫ã/Sky Sports Main Event/g' IPTV.m3u
        sed -i 's/‰ΩìËÇ≤/Sport/g;s/Ëë°ËêÑÁâô/Portugal/g;s/ÊØîÂà©Êó∂/Belgium/g;s/Ê≥¢ÂÖ∞/Poland/g;s/Ê≥ïÂõΩ/France/g;s/ÈòøÊ†πÂª∑:/Argentina:/g;s/ÂúüËÄ≥ÂÖ∂/Turkey/g;s/Âç°Â°îÂ∞î/Qatar/g;s/Ëã±ÂõΩ/U.K./g;s/Ë•øÁè≠Áâô/Spain/g;s/ÁæéÂõΩ:/US:/g;s/Â∑¥Ë•ø/Brazil/g;s/Ëç∑ÂÖ∞/Netherlands/g;s/Ëã±Ë∂Ö/Premier /g;s/ÁΩóÈ©¨Â∞º‰∫ö/Romania/g;s/Êç∑ÂÖã/Czech Republic/g;s/Âä†ÊãøÂ§ß:/Canada:/g;s/Âä†ÊãøÂ§ß:/Canada:/g;s/Ë•øÁî≤Ëµõ‰∫ãÊó∂Èó¥/Laliga Match Time/g;s/Êõ¥Êñ∞Êó∂Èó¥/Update Time/g;s/Ê¨ßÊ¥≤ÊùØËµõ‰∫ã/European Cup Events/g;s/Ê¨ßÊ¥≤ÊùØÂ∞èÁªÑËµõ/European Cup Group Stage/g;s/Âæ∑ÂõΩ/ Germany /g;s/ËãèÊ†ºÂÖ∞/ Scotland /g;s/Ëß£ËØ¥/Commentary/g;s/ËµõÂú∫ÂéüÂ£∞/Soundtrack/g;s/ÂåàÁâôÂà©/ Hungary /g;s/ÁëûÂ£´/ Switzerland /g;s/ÂÖãÁΩóÂú∞‰∫ö/ Croatia /g;s/ÊÑèÂ§ßÂà©/ Italy /g;s/ÈòøÂ∞îÂ∑¥Â∞º‰∫ö/ Albania /g;s/ÊñØÊ¥õÊñáÂ∞º‰∫ö/ Slovenia /g;s/‰∏πÈ∫¶/ Denmark /g;s/Â°ûÂ∞îÁª¥‰∫ö/ Serbia /g;s/Ëã±Ê†ºÂÖ∞/ England /g;s/‰πåÂÖãÂÖ∞/ Ukraine /g;s/ÊñØÊ¥õ‰ºêÂÖã/ Slovakia /g;s/Â••Âú∞Âà©/ Austria /g;s/‰πîÊ≤ª‰∫öÂ∑û/ Georgia /g;s/‰πîÊ≤ª‰∫öÂ∑û/ Georgia /g' IPTV.m3u
        sed -i '/group-title="üëâ/{N; /group-title="üëâ/d;}' IPTV.m3u
        sed -i 's/Ê¨ßÊ¥≤‰∫îÂ§ßËÅîËµõ/Europe top 5 leagues/g;s/+Ëµõ‰∫ã/+Event/g;s/ÊúâÊØîËµõÊó∂Êâç‰ºöÊúâÁîªÈù¢/Only Game Playing/g;s/‰ªÖÈôêÊØîËµõÊúüÈó¥ÂºÄÊí≠/Only available during competitions/g;s/ü™ÇÂ§©Á©∫Sport/ü™ÇSkySport/g;s/Ëë°ËØ≠/Portuguse/g;s/Ëã±ËØ≠/English/g;s/SpainËØ≠/Spanish/g;s/Âæ∑ËØ≠/German/g;s/Ê¨ßÊ¥≤Sport/European Sport/g;s/Ê≥ïËØ≠/French/g;s/‰∫öÈ©¨ÈÄäSport/Amazon Sport/g;s/ÁæéÂõΩÈ¢ëÈÅì/American channel/g;s/ÁæéÂõΩÈ¢ëÈÅì/American channel/g' IPTV.m3u
        sed -i 's/"UDPTV (SD) Live Streams"/"UDPTV Live Streams"/g' IPTV.m3u
        sed -i '1i #EXTM3U url-tvg="https://raw.githubusercontent.com/Love4vn/Test/refs/heads/main/EPG.xml"' IPTV.m3u
        sed -i '/"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/{N; /"üé¨üéûÔ∏è üÖºüÖæüÜÖüÖ∏üÖ¥ üîçüì£"/d;};/HYTV/{N; /HYTV/d;};/HueTV/{N; /HueTV/d;};/"Du l·ªãch-Kh√°m ph√°"/{N; /"Du l·ªãch-Kh√°m ph√°"/d;};/THAIRATH/{N; /THAIRATH/d;};/TRUE4U 24 HD/{N; /TRUE4U 24 HD/d;}' IPTV.m3u
        sed -i '/^\s*$/d' IPTV.m3u

        # Program source
        rm -f EPG.xml
        wget -q --show-progress --no-check-certificate https://lichphatsong.site/schedule/epg.xml.gz -O EPG.xml || true
        wget -q --show-progress --no-check-certificate https://raw.githubusercontent.com/PhatBee/phatbeetv/refs/heads/main/merged_epg.xml -O EPG1.xml || true
        cat EPG1.xml >> EPG.xml || true
        rm -f EPG1.xml || true
        echo "Auto Update IPTV in $DATE!‚ú®CXT‚ú®!" > README.md

    - name: Commit and Push Changes
      run: |
        git config --local user.email "Love4vn@gmail.com"
        git config --local user.name "Love4vn"
        
        # Add only specific files (not workflow files)
        git add IPTV.m3u VTV.m3u VCTV.m3u S_check.m3u EPG.xml README.md
        
        # Check if there are changes
        if git diff --staged --quiet; then
          echo "üü° No changes to commit"
          exit 0
        fi
        
        # Commit changes
        git commit -m "üîÑ Auto-update IPTV at $DATE [skip ci]"
        
        # Pull first to avoid conflicts
        git pull --rebase origin main || true
        
        # Push changes
        git push origin main || {
          echo "‚ö†Ô∏è Normal push failed, trying force push..."
          git push -f origin main
        }
